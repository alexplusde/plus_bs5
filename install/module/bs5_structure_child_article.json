{"id":24,"key":"bs5.structure.child_article","name":"translate:module.bs5.structure.child_article","output":"<?php\n\n\/** @var rex_article_content $this *\/\n\nuse Alexplusde\\BS5\\Fragment;\nuse Alexplusde\\BS5\\Helper;\n\n$category = rex_category::get(\"REX_VALUE[1]\") ?? rex_category::getCurrent();\n?>\n<section class=\"modul-article\" id=\"modul-REX_SLICE_ID\">\n    <?php\n\n    $articles = $category->getArticles(true);\n\n    if ($articles !== null) {\n\n        $category_fragment = new Fragment();\n        $category_fragment->setVar('articles', $articles);\n\n        echo $category_fragment->parse('bs5\/articles\/index.php');\n    } else {\n\n        \/* Instruktionen *\/\n        Helper::showBackendUserInstruction(\"Es wurde eine Kategorie ausgew\u00e4hlt, diese enth\u00e4lt jedoch keine weiteren Artikel.\");\n    }\n    ?>\n<\/section>\n","input":"<?php\r\n\r\nuse Alexplusde\\BS5\\Helper;\r\nuse FriendsOfRedaxo\\MForm;\r\n\r\n\/* Addon-Pr\u00fcfung *\/\r\n$requiredAddons = ['mform', 'mediapool', 'media_manager', 'media_manager_responsive', 'redactor'];\r\nif (!Helper::packageExists($requiredAddons)) {\r\n    echo rex_view::error(rex_i18n::rawMsg('bs5_missing_addon', implode(', ', $requiredAddons)));\r\n    return;\r\n};\r\n\r\n\/* Instruktionen *\/\r\nHelper::showBackendUserInstruction(\"Dieser Block verwendet standardm\u00e4\u00dfig die aktuelle Kategorie, um deren enthaltene Artikel anzuzeigen. W\u00e4hlen Sie eine andere Kategorie aus, um die Artikel einer anderen Kategorie anzuzeigen.\");\r\n\r\nHelper::showBackendUserA18yInstruction(\"F\u00fcr Barrierefreiheit beachten, den untergeordneten Artikeln einen aussagekr\u00e4ftigen Titel und einen Teaser-Text zu geben.\");\r\n\r\n\/* MForm-Formular *\/\r\n$mform = new MForm();\r\n$mform->addFieldsetArea('Kategorie ausw\u00e4hlen');\r\n\r\n\/** Kategorien inkl. Unterkategorien als Array ausgeben *\/\r\n$root = rex_category::getRootCategories();\r\n$options =  [];\r\nforeach ($root as $cat) {\r\n    $options[$cat->getId()] = $cat->getName();\r\n    $subcats = $cat->getChildren(true);\r\n    foreach ($subcats as $subcat) {\r\n        $options[$cat->getId()][$subcat->getId()] = '   '.$subcat->getName();\r\n    }\r\n}\r\n\r\n$mform->addSelectField(1, $options, array('label'=>'(optional)'));\r\n\r\necho $mform->show();\r\n","createdate":"2017-11-08 21:03:24","createuser":"aw@alexplus.de","updatedate":"2024-12-11 01:19:43","updateuser":"mail@alexplus.de","attributes":null,"revision":0}