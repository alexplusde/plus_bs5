{"id":3,"key":"bs5.downloads","name":"translate:module.bs5.downloads","output":"<?php\n\nuse Alexplusde\\BS5\\Fragment;\nuse Alexplusde\\BS5\\Helper;\n\n\/* Addon-Pr\u00fcfung *\/\n$requiredAddons = ['mform', 'mediapool', 'media_manager'];\nif (!Helper::packageExists($requiredAddons)) {\n    echo rex_view::error(rex_i18n::rawMsg('bs5_missing_addon', implode(', ', $requiredAddons)));\n    return;\n};\n\n\/* TODO: @alxndr-w Nicht mehr in JSON-Array speichern f\u00fcr Interoperabilit\u00e4t der Module *\/\n$modul = rex_var::toArray(\"REX_VALUE[1]\");\n$files = array_filter(explode(\",\", \"REX_MEDIALIST[1]\"));\n\n?>\n<section class=\"modul modul-downloads\" id=\"modul-REX_SLICE_ID\">\n    <?php\n\n    #### Title ####\n    if ($modul['show_title']) {\n        echo '<h2 class=\"h3 my-3 mt-5\">';\n        if ($modul['title']) {\n            echo $modul['title'];\n        } else {\n            \"{{ modul:downloads:title }}\";\n        }\n        echo '<\/h2>';\n    }\n\n#### Teaser ####\nif ($modul['teaser']) {\n    echo '<p class=\"teaser\">';\n    echo $modul['teaser'];\n    echo '<\/p>';\n}\n\n#### Files ####\nif (count($files)) {\n    ?>\n        <ul class=\"list-unstyled row\">\n            <?php\n            foreach ($files as $file) {\n                $media = rex_media::get($file);\n                if (is_object($media)) {\n                    if ($media->getTitle()) {\n                        $title = $media->getTitle();\n                    } else {\n                        $title = $file;\n                    } ?>\n                    <li class=\"download col-md-6\">\n\n                        <?php\n                        $download_fragment = new Fragment();\n                    $download_fragment->setVar('title', $media->getTitle());\n                    $download_fragment->setVar('file', $file);\n                    $download_fragment->setVar('layout', 'default');\n                    $download_fragment->setVar('extension', $media->getExtension());\n                    $download_fragment->setVar('description', $media->getValue('description'));\n                    $download_fragment->setVar('filesize', $media->getFormattedSize());\n\n                    echo $download_fragment->parse('school\/downloads\/index.php'); ?>\n                    <\/li>\n            <?php\n                } \/\/ is_object()\n            } \/\/ foreach ($files as $file)\n    ?>\n        <\/ul>\n    <?php\n} \/\/ if (count($files))\n?>\n<\/section>\n","input":"<?php\n\nuse Alexplusde\\BS5\\Helper;\nuse FriendsOfRedaxo\\MForm;\n\n\/* Addon-Pr\u00fcfung *\/\n$requiredAddons = ['mform', 'mediapool', 'media_manager', 'redactor'];\nif (!Helper::packageExists($requiredAddons)) {\n    echo rex_view::error(rex_i18n::rawMsg('bs5_missing_addon', implode(', ', $requiredAddons)));\n    return;\n};\n\n\/* Instruktionen *\/\nHelper::showBackendUserInstruction(\"Legacy-Modus: Die Werte der Eingabefelder m\u00fcssen in das untenstehende Formular \u00fcbertragen werden.\");\n\nHelper::showBackendUserA18yInstruction(\"F\u00fcr Barrierefreiheit beachten, im Medienpool den Titel des Downloads und ggf. eine Beschreibung zu setzen.\");\n\nHelper::showBackendUserA18yInstruction(\"F\u00fcr Barrierefreiheit den Inhalt der Downloads, wenn m\u00f6glich, direkt auf die Website stellen, statt als PDF\/DOCX\/PPTX.\");\n\n\/* MForm-Formular *\/\n$mform = new MForm();\n\n$mform->addFieldsetArea('Teaser');\n\n$mform->addTextField(\"1.title\", array('label'=>'Eigene \u00dcberschrift'));\n$mform->addCheckboxField(\"1.show_title\", array(1=>'ja'), array('label'=>'anzeigen?'))->setDefaultValue(1);\n\n$mform->addTextAreaField(\"1.teaser\", array('label'=>'Teaser','class'=>'redactor-editor--mini'));\n\n$mform->addMedialistField(1, array('label'=>'Downloads'));\n\necho $mform->show();\n","createdate":"2016-10-27 11:35:32","createuser":"aw@alexplus.de","updatedate":"2024-12-11 00:56:42","updateuser":"mail@alexplus.de","attributes":"","revision":0}