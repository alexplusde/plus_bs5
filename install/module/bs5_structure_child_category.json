{"id":22,"key":"bs5.structure.child_category","name":"translate:module.bs5.structure.child_category","output":"<?php\n\n\/** @var rex_article_content $this *\/\n\nuse Alexplusde\\BS5\\Fragment;\n\n?>\n<section class=\"modul-category-cards\" id=\"modul-REX_SLICE_ID\">\n    <?php\n    $articleId = $this->getValue(\"article_id\");\n$selected_category = rex_category::get($this->getValue(\"category_id\"));\n\n$categories = $selected_category->getChildren(true);\n\n\nif ($categories !== null) {\n\n    $category_fragment = new Fragment();\n    $category_fragment->setVar('categories', $categories);\n\n    echo $category_fragment->parse('bs5\/category\/index.php');\n} else {\n    echo '<p>Keine Unterkategorien vorhanden<\/p>';\n}\n?>\n<\/section>\n","input":"<?php\r\n\r\nuse Alexplusde\\BS5\\Helper;\r\nuse FriendsOfRedaxo\\MForm;\r\n\r\n\/* Addon-Pr\u00fcfung *\/\r\n$requiredAddons = ['mform', 'redactor'];\r\nif (!Helper::packageExists($requiredAddons)) {\r\n    echo rex_view::error(rex_i18n::rawMsg('bs5_missing_addon', implode(', ', $requiredAddons)));\r\n    return;\r\n};\r\n\r\n\/* MForm-Formular *\/\r\n$mform = new MForm();\r\n$mform->addFieldsetArea('Kategorie ausw\u00e4hlen');\r\n\r\n\/** Kategorien inkl. Unterkategorien als Array ausgeben *\/\r\n$root = rex_category::getRootCategories();\r\n$options =  [];\r\nforeach ($root as $cat) {\r\n    $options[$cat->getId()] = $cat->getName();\r\n    $subcats = $cat->getChildren(true);\r\n    foreach ($subcats as $subcat) {\r\n        $options[$cat->getId()][$subcat->getId()] = '   '.$subcat->getName();\r\n    }\r\n}\r\n\r\n$mform->addSelectField(1, $options, array('label'=>'(optional)'));\r\n\r\necho $mform->show();\r\n","createdate":"2017-10-08 23:48:35","createuser":"aw@alexplus.de","updatedate":"2024-12-11 01:00:16","updateuser":"mail@alexplus.de","attributes":"","revision":0}